{% extends "saritasapp/base.html" %}
{% load static %}

{% block title %}Rent Item{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/rent_item.css' %}">
{% endblock %}

{% block content %}
    <div class="container">

        <button class="back-arrow" onclick="history.back()">‚Üê Back</button>

        <h2 class="page-title">Rent {{ inventory_item.name }}</h2>

 
        {% if messages %}
            {% for message in messages %}
                <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}


        <form method="post" class="rental-form"> 
            {% csrf_token %}

            
            <label for="customer">Customer:</label>
            <select class="edit-bar" id="customer" name="customer" required>
                <option value="" disabled selected>Select a customer</option>
                {% for customer in customers %}
                    <option value="{{ customer.id }}">{{ customer.first_name }} {{ customer.last_name }}</option>
                {% endfor %}
            </select>

           
            <label>Item:</label>
            <input class="edit-bar" type="text" value="{{ inventory_item.name }} ({{ inventory_item.quantity }} available)" readonly>
            <input type="hidden" name="inventory" value="{{ inventory_item.id }}">

          
            <label for="rental_start">Rental Start Date:</label>
            <div class="date-group"> <!-- Grouped the input and button for better layout -->
                <input class="edit-bar" type="date" id="rental_start" name="rental_start" required min="{{ today|date:'Y-m-d' }}">
                <button type="button" class="btn-secondary" onclick="setToday()">Set Today</button> <!-- Changed to .btn-secondary for consistent styling -->
            </div>

            <label for="rental_end">Rental End Date:</label>
            <input class="edit-bar" type="date" id="rental_end" name="rental_end" required min="{{ today|date:'Y-m-d' }}">

 
            <button type="submit" class="btn-primary">Confirm Rental</button> 
        </form>
    </div>

    <script>
        function setToday() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById("rental_start").value = today;
        }
    </script>
{% endblock %}
