{% extends "saritasapp/base.html" %}
{% load static %}
{% block title %}Reservation{% endblock %}

{% block content %}

<style>
    body {
        font-family: 'Arial', sans-serif;
        background-color: #EAEAEA;
        margin: 0;
        padding: 20px;
    }

    .container {
        max-width: 1100px;
        margin: auto;
        background: #ffffff;
        padding: 30px 40px;
        border-radius: 16px;
    }

    .add-res {
        background-color: #231F20;
        color: white;
        border: none;
        padding: 10px 18px;
        border-radius: 6px;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.3s ease;
    }

    .add-res:hover {
        background-color: #333;
    }

    .top-containers {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin: 25px 0;
        justify-content: space-between;
    }

    .search-bar,
    .select-bar {
        padding: 10px 14px;
        border: 1px solid #ccc;
        border-radius: 6px;
        font-size: 15px;
        flex: 1;
        max-width: 350px;
    }

    .search-bar:focus,
    .select-bar:focus {
        border-color: #AD974F;
        box-shadow: 0 0 5px rgba(173, 151, 79, 0.5);
        outline: none;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        background: white;
    }

    th, td {
        padding: 12px 15px;
        text-align: left;
        border-bottom: 1px solid #ddd;
        font-size: 14px;
    }

    th {
        background-color: #8E793E;
        color: white;
    }

    tr:nth-child(even) {
        background-color: #f9f9f9;
    }

    tr:hover {
        background-color: #f1f1f1;
    }

    .status {
        padding: 6px 14px;
        border-radius: 20px;
        font-size: 13px;
        font-weight: 600;
        display: inline-block;
        text-transform: uppercase;
    }

    .upcoming {
        background-color: #8E793E;
        color: white;
    }

    .ongoing {
        background-color: #AD974F;
        color: white;
    }

    .past {
        background-color: #231F20;
        color: white;
    }

    .pagination {
        text-align: center;
        margin-top: 30px;
    }

    .pagination button {
        padding: 8px 14px;
        margin: 0 4px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        background-color: #AD974F;
        color: white;
        font-weight: bold;
        transition: background 0.3s ease;
    }

    .pagination button:hover {
        background-color: #8E793E;
    }

    /* Style for View Details button */
    .view-details {
        background-color: #AD974F;
        color: white;
        padding: 8px 16px;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 600;
        text-decoration: none;
        display: inline-block;
        transition: background 0.3s ease, transform 0.2s ease;
    }

    .view-details:hover {
        background-color: #8E793E;
        transform: scale(1.05);
    }

    @media (max-width: 768px) {
        .top-containers {
            flex-direction: column;
        }

        .search-bar,
        .select-bar {
            max-width: 100%;
        }
    }
</style>

<div class="container">
    <button class="add-res" onclick="addReservation()">+ Add Reservation</button>

    <div class="top-containers">
        <input type="text" class="search-bar" id="search" placeholder="Quick search..." onkeyup="searchTable()">
        <select class="select-bar" id="statusFilter" onchange="filterStatus()">
            <option value="">All</option>
            <option value="Upcoming">Upcoming</option>
            <option value="Ongoing">Ongoing</option>
            <option value="Past">Past</option>
        </select>
    </div>

    <table id="reservationTable">
        <thead>
            <tr>
                <th>Event Name</th>
                <th>Event Venue</th>
                <th>Client Details</th>
                <th>Date of Event</th>
                <th>Details</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody id="tableBody">
            <!-- Dynamic rows will be inserted here -->
        </tbody>
    </table>
    <div class="pagination" id="pagination"></div>
</div>

<script>
    const reservations = [
        { name: "Wedding Gala", venue: "Grand Hall", client: "Anna Dela Cruz (09171234567)", date: "03/18/2025", status: "Upcoming" },
        { name: "Birthday Bash", venue: "Seaside Venue", client: "Mark Reyes (0999888777)", date: "03/10/2025", status: "Ongoing" },
        { name: "Anniversary", venue: "Rosewood Garden", client: "Liza & John (09090001122)", date: "02/20/2025", status: "Past" }
    ];
    let currentPage = 1;
    const rowsPerPage = 2;

    function displayTable() {
        let tableBody = document.getElementById("tableBody");
        tableBody.innerHTML = "";
        let filteredData = filterStatus(true);
        let start = (currentPage - 1) * rowsPerPage;
        let end = start + rowsPerPage;
        let paginatedData = filteredData.slice(start, end);
        paginatedData.forEach(reservation => {
            let row = `<tr>
                <td>${reservation.name}</td>
                <td>${reservation.venue}</td>
                <td>${reservation.client}</td>
                <td>${reservation.date}</td>
                <td><a href="#" class="view-details">View Details</a></td>
                <td><span class="status ${reservation.status.toLowerCase()}">${reservation.status}</span></td>
            </tr>`;
            tableBody.innerHTML += row;
        });
        displayPagination(filteredData.length);
    }

    function searchTable() {
        let input = document.getElementById("search").value.toLowerCase();
        let filteredData = reservations.filter(res =>
            res.name.toLowerCase().includes(input) ||
            res.venue.toLowerCase().includes(input) ||
            res.client.toLowerCase().includes(input) ||
            res.date.includes(input)
        );
        displayFilteredTable(filteredData);
    }

    function filterStatus(returnData = false) {
        let status = document.getElementById("statusFilter").value;
        let filteredData = reservations.filter(res => !status || res.status === status);
        if (returnData) return filteredData;
        displayFilteredTable(filteredData);
    }

    function displayFilteredTable(filteredData) {
        currentPage = 1;
        displayTable();
    }

    function displayPagination(totalRows) {
        let pagination = document.getElementById("pagination");
        pagination.innerHTML = "";
        let totalPages = Math.ceil(totalRows / rowsPerPage);
        for (let i = 1; i <= totalPages; i++) {
            pagination.innerHTML += `<button onclick="changePage(${i})">${i}</button>`;
        }
    }

    function changePage(page) {
        currentPage = page;
        displayTable();
    }

    function addReservation() {
        alert("Add Reservation clicked");
    }

    displayTable();
</script>

{% endblock %}
