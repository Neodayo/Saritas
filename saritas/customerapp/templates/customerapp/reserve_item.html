{% extends 'customerapp/base.html' %}
{% load static %}

{% block title %}Reserve Item{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="">
{% endblock %}

{% block content %}
<div class="reservation-container">
    <h2>Reserve Item: {{ item.name }}</h2>
    
    {% if item.image %}
        <img src="{{ item.image.url }}" alt="{{ item.name }}" class="item-image">
    {% else %}
        <img src="{% static 'image/default-placeholder.png' %}" alt="No image available" class="item-image">
    {% endif %}
    {% if messages %}
    <div class="alert-messages">
        {% for message in messages %}
        <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}
    
    <form method="post">
        {% csrf_token %}
        
        <div class="form-group">
            <label>Item: {{ item.name }}</label>
            <input type="hidden" name="item_id" value="{{ item.id }}">
        </div>
        
        {{ form.as_p }}
        
        <button type="submit" class="btn btn-primary">Submit Reservation</button>
    </form>
    
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Set minimum dates
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('id_reservation_date').min = today;
        
        // Update end date minimum when start date changes
        document.getElementById('id_reservation_date').addEventListener('change', function() {
            const startDate = this.value;
            document.getElementById('id_return_date').min = startDate;
        });
    });
    </script>

{% endblock %}
